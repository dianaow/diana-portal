<div class = "container">
  <div class = "row" id="article">
    <h2><%= @article.title %></h2><hr>
      <div class = "col-md-9 col-xs-8">
        <div id= "article-description">
          <% if @article.description.length > 1000 %>
          <%= truncate(@article.description, length: 1000) %>
          <%= link_to 'Read more', '', class: "read-more-#{@article.id}" %>
          <script>
          $('.read-more-<%= @article.id %>').on('click', function(e) {
            e.preventDefault()
          $(this).parent().html('<%= escape_javascript @article.description %>')
          })
          </script>
          <% else %>
          <%= @article.description %>
          <% end %>
        </div>
        <div class = "row padding-top-20">
          <%= render 'comments/comment' %>
        </div>
      </div>

      <div class = "col-md-3 col-xs-4">
        
        <% if current_user == @article.user %>
        <p><%= link_to 'Edit', edit_article_path(@article) %> |
        <% end %>
        <%= link_to 'Back', articles_path %></p>
        
        <p>Created by: <%= @article.user.name %></p>
        <p>Created: <%= time_ago_in_words(@article.created_at) %> ago</p>
        <p>Last updated: <%= time_ago_in_words(@article.updated_at) %> ago</p>
        <h3><%= @article.get_upvotes.size %> votes</h3>
        
        <div class="padding-top-20">
        <%= link_to toggle_vote_article_path(@article.id), method: :put do %>
          <button type="button" class="btn btn-default btn-lg">
            <span class="glyphicon glyphicon-thumbs-up" aria-hidden="true"></span> Vote
          </button>
        <% end %>
        </div>
        
        <div class="padding-top-20">
        <% @article_categories.each do |category| %>
            <%= link_to "#{category.name}", category_path(category), class: "btn btn-xs btn-info" %>
        <% end %>
        </div>
        
      </div>
  </div>
</div>








